{% extends "base.html.twig" %}

{% block title %}Tricks
{% endblock %}

{% block body %}
	<section class="item-list" id="Home">
		<header class="masthead">
			<div class="row h-100 align-items-center">
				<div class="col-12 text-center">
					<h1 class="font-MF bg-white p-2">BlogSnow</h1>
				</div>
			</div>
			<div id="arrowDown" class="arrow">
				<a href="#tricks">&#8595;</a>
			</div>
			<div id="arrowTop" class="arrow" style="display : none;">
				<a href="#Home">&#8593;</a>
			</div>
		</header>
		<div class="row min-vh-100 justify-content-around" id="tricks">
			{% for figure in figures %}
				<article class="mt-nav row col-lg-2 h-25 m-3" id="{{figure.id}}">
					<img src="{{ asset('uploads/home/' ~ figure.image) }}" alt="" width="100%" height="300px" class="mt-3 border border-primary">
					<div class="border border-primary row w-100 justify-content-between ml-0">
						<div>
							<a href="{{ path('blog_show', {'id': figure.id}) }}" class="font-MF col-10">{{ figure.name }}</a>
						</div>
						<div>
							{% if app.user %}
								<a href="{{ path('blog_edit', {'id': figure.id}) }}">&#128394;</a>
								<a href="{{ path('delete', {'entity': 'figure', 'id': figure.id}) }}" onclick="return confirm('Etes-vous sur de vouloir supprimer cette figure ?')">
									&#128465;</a>
							{% endif %}
						</div>
					</div>
				</article>
			{% endfor %}
		</div>

	</section>
{% endblock %}
{% block javascripts %}
	<script type="text/javascript">
		var arrowDown = document.getElementById('arrowDown');
var arrowTop = document.getElementById('arrowTop');
arrowDown.onclick = function () {
arrowDown.style.display = "none";
arrowTop.style.display = "block";
}
arrowTop.onclick = function () {
arrowTop.style.display = "none";
arrowDown.style.display = "block";
}
	</script>
	<script>
		$(function () {
$(window).scroll(function () {
var id = $('.item-list').last().attr('id');
if ($(window).scrollTop() === $(document).height() - $(window).height()) { // $.mockjaxClear();
$.ajax({
type: "get",
url: Routing.generate("annonce-ajax-next", {id}),
beforeSend: function () {
$('.loader').show();
},
success: function (data) { // alert('ok '+ data["adverts"]);
if (data) { // je ne sais plus quoi faire ici
}
}
});
}
});
});
	</script>
{% endblock %}
